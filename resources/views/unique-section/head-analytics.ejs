<% if (tracking) { %>
<% tracking.forEach(trackings => { %>
<% if (trackings.position === 'Head') { %>
<% if (trackings.type === 'Google Analytics' || trackings.type === 'Google Adwords') { %>
<!-- Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=<%= trackings.snippet_code%>"></script>
<script>
  // console.log("In Google Analytics");
  window.dataLayer = window.dataLayer || [];

  function gtag() {
    dataLayer.push(arguments);
  }

  gtag('js', new Date());
  gtag('config', "<%= trackings.snippet_code%>");
</script>
<% } %>
<% if (trackings.type === 'Google Tag Manager') { %>
<!-- Start Google Tag manager -->
<script>
  (function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
      'gtm.start': new Date().getTime(),
      event: 'gtm.js'
    });
    const f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
      'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
  })(window, document, 'script', 'dataLayer', "<%= trackings.snippet_code %>");
</script>
<!-- End Google Tag Manager -->
<% } %>
<% if (trackings.type === 'Facebook Pixel' || trackings.type === 'Instagram Pixel') { %>
<!-- Facebook Pixel Code -->
<script>
  ! function(f, b, e, v, n, t, s) {
    if (f.fbq) return;
    n = f.fbq = function() {
      n.callMethod ?
        n.callMethod.apply(n, arguments) : n.queue.push(arguments)
    };
    if (!f._fbq) f._fbq = n;
    n.push = n;
    n.loaded = !0;
    n.version = '2.0';
    n.queue = [];
    t = b.createElement(e);
    t.async = !0;
    t.src = v;
    s = b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t, s)
  }(window, document, 'script',
    'https://connect.facebook.net/en_US/fbevents.js');
  fbq('init', `<%= trackings.snippet_code %>`);
  fbq('track', 'PageView');
</script>
<noscript>
  <img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=<%= trackings.snippet_code %>&ev=PageView&noscript=1" />
</noscript>
<!-- End Facebook Pixel Code -->
<% } %>
<% if (trackings.type === 'Snapchat Pixel') { %>
<!-- Snapchat Pixel Code -->
<script type='text/javascript'>
  (function(e, t, n) {
    if (e.snaptr) return;
    let a = e.snaptr = function() {
      a.handleRequest ? a.handleRequest.apply(a, arguments) : a.queue.push(arguments)
    };
    a.queue = [];
    let s = 'script';
    r = t.createElement(s);
    r.async = !0;
    r.src = n;
    let u = t.getElementsByTagName(s)[0];
    u.parentNode.insertBefore(r, u);
  })
  (window, document, 'https://sc-static.net/scevent.min.js');
  snaptr('init', "<%= trackings.snippet_code %>");
  snaptr('track', 'PAGE_VIEW');
</script>
<!-- End Snapchat Pixel Code -->
<% } %>
<% if (trackings.type === 'Pinterest Pixel') { %>
<!-- Pinterest Pixel -->
<script>
  ! function(e) {
    if (!window.pintrk) {
      window.pintrk = function() {
        window.pintrk.queue.push(Array.prototype.slice.call(arguments));
      };
      let n = window.pintrk;
      n.queue = [];
      n.version = "3.0";
      let t = document.createElement("script");
      t.async = true;
      t.src = e;
      let r = document.getElementsByTagName("script")[0];
      r.parentNode.insertBefore(t, r);
    }
  }("https://s.pinimg.com/ct/core.js");
  pintrk('load', "<%= trackings.snippet_code %>");
  pintrk('page');
</script>
<!-- end Pinterest Pixel Code-->
<% } %>
<% if (trackings.type === 'Quora Pixel') { %>
<!-- Quora Pixel Code -->
<script>
  ! function(q, e, v, n, t, s) {
    if (q.qp) return;
    n = q.qp = function() {
      n.qp ? n.qp.apply(n, arguments) : n.queue.push(arguments);
    };
    n.queue = [];
    t = document.createElement(e);
    t.async = true;
    t.src = v;
    s = document.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t, s);
  }(window, 'script', 'https://a.quora.com/qevents.js');

  qp('init', "<%= trackings.snippet_code %>");
  qp('track', 'ViewContent');
</script>
<noscript>
  <img height="1" width="1" style="display:none" src="https://q.quora.com/_/ad/<%= trackings.snippet_code %>/pixel?tag=ViewContent&noscript=1" />
</noscript>
<script>
  qp('track', 'Generic');
</script>
<!-- End of Quora Pixel Code -->
<% } %>
<% if (trackings.type === "LinkedIn Pixel") { %>
<!-- LinkedIn Pixel Code -->
<script type="text/javascript">
  _linkedin_partner_id = "<%= trackings.snippet_code %>";
  window._linkedin_data_partner_ids = window._linkedin_data_partner_ids || [];
  window._linkedin_data_partner_ids.push(_linkedin_partner_id);
</script>
<script type="text/javascript">
  (function() {
    let s = document.getElementsByTagName("script")[0];
    let b = document.createElement("script");
    b.type = "text/javascript";
    b.async = true;
    b.src = "https://snap.licdn.com/li.lms-analytics/insight.min.js";
    s.parentNode.insertBefore(b, s);
  })();
</script>
<noscript>
  <img height="1" width="1" style="display:none;" alt="" src="https://px.ads.linkedin.com/collect/?pid=<%= trackings.snippet_code %>&fmt=gif" />
</noscript>
<!-- End of LinkedIn Pixel Code -->
<% } %>
<% if (trackings.type === 'Twitter Pixel') { %>
<!-- Twitter Pixel Code -->
<script>
  ! function(e, t, n, s, u, a) {
    e.twq || (s = e.twq = function() {
        s.exe ? s.exe.apply(s, arguments) : s.queue.push(arguments);
      },
      s.version = '1.1',
      s.queue = [],
      u = t.createElement(n),
      u.async = true,
      u.src = '//static.ads-twitter.com/uwt.js',
      a = t.getElementsByTagName(n)[0], a.parentNode.insertBefore(u, a))
  }(window, document, 'script');
  // Insert Twitter Pixel ID and Standard Event data below
  twq('init', "<%= trackings.snippet_code %>");
  // twq('track','Purchase', {
  //     value: '29.95',
  //     currency: 'USD',
  //     num_items: '3',
  // });
</script>
<!-- End of Twitter Pixel Code -->
<% } %>
<% if (trackings.type === 'TikTok Pixel') { %>
<!-- TikTok Pixel Code -->
<script>
  ! function(w, d, t) {
    w.TiktokAnalyticsObject = t;
    let ttq = w[t] = w[t] || [];
    ttq.methods = ["page", "track", "identify", "instances", "debug", "on", "off", "once", "ready", "alias", "group", "enableCookie", "disableCookie"];
    ttq.setAndDefer = function(t, e) {
      t[e] = function() {
        t.push([e].concat(Array.prototype.slice.call(arguments, 0)))
      }
    };
    for (let i = 0; i < ttq.methods.length; i++)
      ttq.setAndDefer(ttq, ttq.methods[i]);
    ttq.instance = function(t) {
      for (let e = ttq._i[t] || [], n = 0; n < ttq.methods.length; n++)
        ttq.setAndDefer(e, ttq.methods[n]);
      return e
    };
    ttq.load = function(e, n) {
      let i = "https://analytics.tiktok.com/i18n/pixel/events.js";
      ttq._i = ttq._i || {}, ttq._i[e] = [], ttq._i[e]._u = i, ttq._t = ttq._t || {},
        ttq._t[e] = +new Date, ttq._o = ttq._o || {}, ttq._o[e] = n || {};
      let o = document.createElement("script");
      o.type = "text/javascript", o.async = true, o.src = i + "?sdkid=" + e + "&lib=" + t;
      let a = document.getElementsByTagName("script")[0];
      a.parentNode.insertBefore(o, a);
    };

    ttq.load("<%- trackings.snippet_code %>");
    ttq.page();
  }(window, document, 'ttq');
</script>
<!-- End of TikTok Pixel Code -->

<% } %>
<% if (trackings.type === "Custom") { %>
<!-- Custom Code -->
<% if (everyThingInTags(trackings.snippet_code, 'script')) { %>
<%= trackings.snippet_code %>
<% } else { %>
<!-- <script>
  document.write('<%- trackings.snippet_code %>');
</script> -->
<% } %>
<!-- End Custom Code -->
<% } %>
<% } %>
<% }) %>
<% } %>